{% extends 'base.html' %}
{% block content %}
{% if not my_view %}
<div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-3 gap-2">
  <!-- Title -->
  <h3 class="mb-2 mb-md-0 text-center text-md-start">Attendance</h3>

  <!-- Search Form -->
  <form class="d-flex flex-column flex-sm-row w-100 w-md-auto" method="get">
    <input class="form-control me-sm-2 mb-2 mb-sm-0" type="search" name="q" value="{{ q }}" placeholder="Search by name">
    <button class="btn btn-outline-secondary" type="submit">Search</button>
  </form>

  <!-- Mark Attendance Button -->
  <a class="btn btn-primary w-50 w-md-auto" href="{% url 'attendance_create' %}">Mark Attendance</a>
</div>
{% else %}
<h3 class="mb-3">My Attendance</h3>
{% endif %}

<div class="card">
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-striped table-bordered mb-0">
        <thead>
          <tr>
            <th>Date</th>
            <th>Employee</th>
            <th>Status</th>
            <th>Remarks</th>
            <th>Marked By</th>
          </tr>
        </thead>
        <tbody>
          {% for a in items %}
            <tr>
              <td>{{ a.date }}</td>
              <td>{{ a.employee.get_full_name|default:a.employee.username }}</td>
              <td>{{ a.get_status_display }}</td>
              <td>{{ a.remarks }}</td>
              <td>{{ a.created_by }}</td>
            </tr>
          {% empty %}
            <tr><td colspan="5" class="text-center p-3">No records.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
